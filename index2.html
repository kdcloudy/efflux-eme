<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Efflux</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link href="style.css" rel="stylesheet">

    </head>
    <script src="script/dash.all.js"></script>
    <body>
        <div class="navb">
            <nav class="navbar">
                <a class="navbrand" href="/">efflux</a>
            </nav>
        </div>
        <p style="margin-top:15px; margin-bottom: 30px; font-size:2vw; font-weight:bold; text-align: center">
            Demonstrating an encrypted video stream
        </p>
<div class="container">
        <div class="row ">
            <div class="col">
                <div class="left allsides">
                        <div class="embed-responsive embed-responsive-16by9">
                            <video id="html5video2" width="500" height="300" controls>
                                <source src="./unencrypted/unenc-video.mp4" type="video/mp4"></source>
                                    <!--add unencrypted vid url-->
                            </video>                    
                        </div>
                        <div style=" margin-top:15px; font-size: 1.5vw; font-weight: bold">
                            <p class="text-center">Unencrypted</p>
                        </div>
                            <p class="text-left" style=" font-size:1vw;  font-weight: bold">
                            Stream info:<br>
                            Video Codec: H.264<br>
                            Audio Codec: M4A<br>
                            Resolution: 1920x804<br>
                            Encryption: N/A<br>
                            </p>

                </div>
            </div>
            
            <div class="col">
                <div class="right allsides">

                    <div class="embed-responsive embed-responsive-16by9">
                        <video id="html5video" controls autoplay>
                        <!--add encrypted vid url--></video>                    
                    </div>
                    <div style=" margin-top:15px; font-size: 1.5vw; font-weight: bold">
                        <p class="text-center">Encrypted</p>
                    </div>
                    <p class="text-left" style="font-size:1vw; font-weight: bold">
                        Stream info:<br>
                        Video Codec: H.264<br>
                        Audio Codec: M4A<br>
                        Resolution: 1920x804<br>
                        Encryption: MPEG-Common Encryption (CENC)<br>
                      </p>

                </div>
            </div>


        </div>

</div>


    </body>
    <script>
        // setup the video element and attach it to the Dash player
        var url = "./encrypted/stream.mpd";
        var context = new Dash.di.DashContext();
        var player = new MediaPlayer(context);
        player.startup();
        player.attachView(document.querySelector("#html5video"));
        player.attachSource(url);
    </script>
    <script src="script/main.js"></script>

<!-- <script class="code">
function init() {
  const protData = {
    "org.w3.clearkey": {
      "clearkeys": {
        "hyN9IKGfWKdAwFaE5pm0qg": "oW5AK5BW43HzbTSKpiu3SQ",
      },
    },
  };
  var video,
    player,
    url = "./nttdtrailer/stream.mpd";
  video = document.querySelector("#html5video");
  player = dashjs.MediaPlayer().create();
  player.initialize(video, url, true);
  player.setProtectionData(protData);
}
</script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    init();
});
</script> -->
</html>
